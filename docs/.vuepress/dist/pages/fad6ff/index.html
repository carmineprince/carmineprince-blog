<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>用TypeScript编写React的最佳实践 | Carmineprince&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Stay hungry,stay foolish">
    <link rel="preload" href="/assets/css/0.styles.c6aace5f.css" as="style"><link rel="preload" href="/assets/js/app.2fbddcf7.js" as="script"><link rel="preload" href="/assets/js/2.f619f824.js" as="script"><link rel="preload" href="/assets/js/35.5821b7ac.js" as="script"><link rel="prefetch" href="/assets/js/10.168cbede.js"><link rel="prefetch" href="/assets/js/11.fc5afb64.js"><link rel="prefetch" href="/assets/js/12.55eeef69.js"><link rel="prefetch" href="/assets/js/13.deb5b582.js"><link rel="prefetch" href="/assets/js/14.9bbeb4c6.js"><link rel="prefetch" href="/assets/js/15.ff707f17.js"><link rel="prefetch" href="/assets/js/16.be64fa1d.js"><link rel="prefetch" href="/assets/js/17.fefebb92.js"><link rel="prefetch" href="/assets/js/18.1269d5c8.js"><link rel="prefetch" href="/assets/js/19.5ffe851e.js"><link rel="prefetch" href="/assets/js/20.dcec5363.js"><link rel="prefetch" href="/assets/js/21.14c24fe5.js"><link rel="prefetch" href="/assets/js/22.d9280ee5.js"><link rel="prefetch" href="/assets/js/23.0d721ced.js"><link rel="prefetch" href="/assets/js/24.fbe63f99.js"><link rel="prefetch" href="/assets/js/25.7d3c7109.js"><link rel="prefetch" href="/assets/js/26.6297aa99.js"><link rel="prefetch" href="/assets/js/27.0cffddb0.js"><link rel="prefetch" href="/assets/js/28.5238c4e9.js"><link rel="prefetch" href="/assets/js/29.fc87429f.js"><link rel="prefetch" href="/assets/js/3.4e5dd0a2.js"><link rel="prefetch" href="/assets/js/30.58313e8f.js"><link rel="prefetch" href="/assets/js/31.0f56d66c.js"><link rel="prefetch" href="/assets/js/32.e6c8fa43.js"><link rel="prefetch" href="/assets/js/33.a59e7d0f.js"><link rel="prefetch" href="/assets/js/34.1147bca1.js"><link rel="prefetch" href="/assets/js/36.deca8dc0.js"><link rel="prefetch" href="/assets/js/37.4e658599.js"><link rel="prefetch" href="/assets/js/38.165d5c32.js"><link rel="prefetch" href="/assets/js/39.bbed49bb.js"><link rel="prefetch" href="/assets/js/4.ca1199f2.js"><link rel="prefetch" href="/assets/js/40.bb79082b.js"><link rel="prefetch" href="/assets/js/41.42ea1299.js"><link rel="prefetch" href="/assets/js/42.b8ba2a62.js"><link rel="prefetch" href="/assets/js/43.d051e020.js"><link rel="prefetch" href="/assets/js/44.868b44c1.js"><link rel="prefetch" href="/assets/js/45.0f605996.js"><link rel="prefetch" href="/assets/js/46.4d59d521.js"><link rel="prefetch" href="/assets/js/47.a3039879.js"><link rel="prefetch" href="/assets/js/48.31ab0df8.js"><link rel="prefetch" href="/assets/js/49.11353204.js"><link rel="prefetch" href="/assets/js/5.5a7b8862.js"><link rel="prefetch" href="/assets/js/50.03401f76.js"><link rel="prefetch" href="/assets/js/51.883bfb90.js"><link rel="prefetch" href="/assets/js/52.3f7de770.js"><link rel="prefetch" href="/assets/js/53.9d5b465a.js"><link rel="prefetch" href="/assets/js/54.bcf6a7e7.js"><link rel="prefetch" href="/assets/js/55.20c9ad07.js"><link rel="prefetch" href="/assets/js/56.a826e928.js"><link rel="prefetch" href="/assets/js/57.e40daa9c.js"><link rel="prefetch" href="/assets/js/58.1310771f.js"><link rel="prefetch" href="/assets/js/59.84a8d83f.js"><link rel="prefetch" href="/assets/js/6.93ae5fdc.js"><link rel="prefetch" href="/assets/js/7.5a818291.js"><link rel="prefetch" href="/assets/js/8.7d7e42ff.js"><link rel="prefetch" href="/assets/js/9.2aaaee92.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c6aace5f.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Carmineprince's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/6a1054/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/31329c/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/efc5a2/" class="nav-link">JavaScript</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/frame/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/37498d/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/fad6ff/" aria-current="page" class="nav-link router-link-exact-active router-link-active">React</a></li><li class="dropdown-subitem"><a href="/pages/8c812a/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/667cb2/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/pages/6df927/" class="nav-link">Flutter</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/back/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/497c5f/" class="nav-link">Python</a></li><li class="dropdown-subitem"><a href="/pages/157def/" class="nav-link">运维</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><a href="/note/" class="link-title">笔记</a> <span class="title" style="display:none;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d99d1f/" class="nav-link">重学前端</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://carmineprince.oss-cn-qingdao.aliyuncs.com/2021/10/1634723096112.jpg"> <div class="blogger-info"><h3>Ziqi Wang</h3> <span>胡思乱想程序员</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/6a1054/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/pages/31329c/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/pages/efc5a2/" class="nav-link">JavaScript</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/frame/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/37498d/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/pages/fad6ff/" aria-current="page" class="nav-link router-link-exact-active router-link-active">React</a></li><li class="dropdown-subitem"><a href="/pages/8c812a/" class="nav-link">TypeScript</a></li><li class="dropdown-subitem"><a href="/pages/667cb2/" class="nav-link">Node</a></li><li class="dropdown-subitem"><a href="/pages/6df927/" class="nav-link">Flutter</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/back/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/497c5f/" class="nav-link">Python</a></li><li class="dropdown-subitem"><a href="/pages/157def/" class="nav-link">运维</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><a href="/note/" class="link-title">笔记</a> <span class="title" style="display:none;">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/d99d1f/" class="nav-link">重学前端</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/pages/fad6ff/" aria-current="page" class="active sidebar-link">用TypeScript编写React的最佳实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/fad6ff/#项目初始化" class="sidebar-link">项目初始化</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#tsconfig-json" class="sidebar-link">tsconfig.json</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#eslint-prettier" class="sidebar-link">ESLint / Prettier</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#vscode-扩展和设置" class="sidebar-link">VSCode 扩展和设置</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#组件" class="sidebar-link">组件</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#props" class="sidebar-link">Props</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#hooks" class="sidebar-link">Hooks</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#常见用例" class="sidebar-link">常见用例</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#处理表单事件" class="sidebar-link">处理表单事件</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#扩展组件的-props" class="sidebar-link">扩展组件的 Props</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#第三方库" class="sidebar-link">第三方库</a></li><li class="sidebar-sub-header"><a href="/pages/fad6ff/#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/pages/d68f8d/" class="sidebar-link">项目结构搭建-慕课笔记</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/categories/?category=React%E7%9B%B8%E5%85%B3" title="分类" data-v-1cd794fe>React相关</a></li> <!----> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/carmineprince" target="_blank" title="作者" class="beLink" data-v-1cd794fe>carmineprince</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-10-20</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          用TypeScript编写React的最佳实践
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="用typescript编写react的最佳实践"><a href="#用typescript编写react的最佳实践" class="header-anchor">#</a> 用TypeScript编写React的最佳实践</h1> <p>[TOC]</p> <h2 id="项目初始化"><a href="#项目初始化" class="header-anchor">#</a> 项目初始化</h2> <p>初始化一个 <code>React/TypeScript</code> 应用程序的最快方法是 <code>create-react-app</code> 与 <code>TypeScript</code> 模板一起使用。你可以运行以下面的命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npx create-react-app my-app --template typescript
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这可以让你开始使用 <code>TypeScript</code> 编写 <code>React</code> 。一些明显的区别是：</p> <ul><li><code>.tsx</code>：<code>TypeScript JSX</code> 文件扩展</li> <li><code>tsconfig.json</code>：具有一些默认配置的 <code>TypeScript</code> 配置文件</li> <li><code>react-app-env.d.ts</code>：<code>TypeScript</code> 声明文件，可以进行允许引用 <code>SVG</code> 这样的配置</li></ul> <h2 id="tsconfig-json"><a href="#tsconfig-json" class="header-anchor">#</a> tsconfig.json</h2> <p>幸运的是，最新的 <code>React/TypeScript</code> 会自动生成 <code>tsconfig.json</code> ，并且默认带有一些最基本的配置。我们建议你修改成下面的内容：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>
<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定 ECMAScript 版本</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;dom&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;dom.iterable&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;esnext&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 要包含在编译中的依赖库文件列表</span>
    <span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许编译 JavaScript 文件</span>
    <span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 跳过所有声明文件的类型检查</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 禁用命名空间引用 (import * as fs from &quot;fs&quot;) 启用 CJS/AMD/UMD 风格引用 (import fs from &quot;fs&quot;)</span>
    <span class="token property">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许从没有默认导出的模块进行默认导入</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 启用所有严格类型检查选项</span>
    <span class="token property">&quot;forceConsistentCasingInFileNames&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 不允许对同一个文件使用不一致格式的引用</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 指定模块代码生成</span>
    <span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 使用 Node.js 风格解析模块</span>
    <span class="token property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许使用 .json 扩展名导入的模块</span>
    <span class="token property">&quot;noEmit&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 不输出(意思是不编译代码，只执行类型检查)</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 在.tsx文件中支持JSX</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 生成相应的.map文件</span>
    <span class="token property">&quot;declaration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 生成相应的.d.ts文件</span>
    <span class="token property">&quot;noUnusedLocals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 报告未使用的本地变量的错误</span>
    <span class="token property">&quot;noUnusedParameters&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 报告未使用参数的错误</span>
    <span class="token property">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 启用对ES装饰器的实验性支持</span>
    <span class="token property">&quot;incremental&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 通过从以前的编译中读取/写入信息到磁盘上的文件来启用增量编译</span>
    <span class="token property">&quot;noFallthroughCasesInSwitch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;src/**/*&quot;</span> <span class="token comment">// *** TypeScript文件应该进行类型检查 ***</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">]</span> <span class="token comment">// *** 不进行类型检查的文件 ***</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><blockquote><p>其他建议来自 react-typescript-cheatsheet 社区</p></blockquote> <h2 id="eslint-prettier"><a href="#eslint-prettier" class="header-anchor">#</a> ESLint / Prettier</h2> <p>为了确保你的代码遵循项目或团队的规则，并且样式保持一致，建议你设置 <code>ESLint</code> 和 <code>Prettier</code> 。为了让它们配合的很好，请按照以下步骤进行设置。</p> <ol><li>安装依赖</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn add eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-react --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>在根目录下创建一个<code>eslintrc.js</code> 文件并添加以下内容：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span>  <span class="token punctuation">{</span>
  parser<span class="token operator">:</span>  <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>  <span class="token comment">// 指定ESLint解析器</span>
  <span class="token keyword">extends</span><span class="token operator">:</span>  <span class="token punctuation">[</span>
    <span class="token string">'plugin:react/recommended'</span><span class="token punctuation">,</span>  <span class="token comment">// 使用来自 @eslint-plugin-react 的推荐规则</span>
    <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">,</span>  <span class="token comment">// 使用来自@typescript-eslint/eslint-plugin的推荐规则</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span>  <span class="token punctuation">{</span>
  ecmaVersion<span class="token operator">:</span>  <span class="token number">2018</span><span class="token punctuation">,</span>  <span class="token comment">// 允许解析最新的 ECMAScript 特性</span>
  sourceType<span class="token operator">:</span>  <span class="token string">'module'</span><span class="token punctuation">,</span>  <span class="token comment">// 允许使用 import</span>
  ecmaFeatures<span class="token operator">:</span>  <span class="token punctuation">{</span>
    jsx<span class="token operator">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 允许对JSX进行解析</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span>  <span class="token punctuation">{</span>
    <span class="token comment">// 自定义规则</span>
    <span class="token comment">// e.g. &quot;@typescript-eslint/explicit-function-return-type&quot;: &quot;off&quot;,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  settings<span class="token operator">:</span>  <span class="token punctuation">{</span>
    react<span class="token operator">:</span>  <span class="token punctuation">{</span>
      version<span class="token operator">:</span>  <span class="token string">'detect'</span><span class="token punctuation">,</span>  <span class="token comment">// 告诉 eslint-plugin-react 自动检测 React 的版本</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ol start="3"><li>添加 <code>Prettier</code> 依赖</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn add prettier eslint-config-prettier eslint-plugin-prettier --dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>在根目录下创建一个 <code>.prettierrc.js</code> 文件并添加以下内容：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span>  <span class="token punctuation">{</span>
  semi<span class="token operator">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
  trailingComma<span class="token operator">:</span>  <span class="token string">'all'</span><span class="token punctuation">,</span>
  singleQuote<span class="token operator">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
  printWidth<span class="token operator">:</span>  <span class="token number">120</span><span class="token punctuation">,</span>
  tabWidth<span class="token operator">:</span>  <span class="token number">4</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="5"><li>更新 <code>.eslintrc.js</code> 文件：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span>  <span class="token punctuation">{</span>
  parser<span class="token operator">:</span>  <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>  <span class="token comment">// 指定ESLint解析器</span>
  <span class="token keyword">extends</span><span class="token operator">:</span>  <span class="token punctuation">[</span>
    <span class="token string">'plugin:react/recommended'</span><span class="token punctuation">,</span>  <span class="token comment">// 使用来自 @eslint-plugin-react 的推荐规则</span>
    <span class="token string">'plugin:@typescript-eslint/recommended'</span><span class="token punctuation">,</span>  <span class="token comment">// 使用来自@typescript-eslint/eslint-plugin的推荐规则</span>
    <span class="token string">'prettier/@typescript-eslint'</span><span class="token punctuation">,</span>  <span class="token comment">// 使用 ESLint -config-prettier 禁用来自@typescript-eslint/ ESLint 与 prettier 冲突的 ESLint 规则</span>
    <span class="token string">'plugin:prettier/recommended'</span><span class="token punctuation">,</span>  
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  parserOptions<span class="token operator">:</span>  <span class="token punctuation">{</span>
  ecmaVersion<span class="token operator">:</span>  <span class="token number">2018</span><span class="token punctuation">,</span>  <span class="token comment">// 允许解析最新的 ECMAScript 特性</span>
  sourceType<span class="token operator">:</span>  <span class="token string">'module'</span><span class="token punctuation">,</span>  <span class="token comment">// 允许使用 import</span>
  ecmaFeatures<span class="token operator">:</span>  <span class="token punctuation">{</span>
    jsx<span class="token operator">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 允许对JSX进行解析</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span>  <span class="token punctuation">{</span>
    <span class="token comment">// 自定义规则</span>
    <span class="token comment">// e.g. &quot;@typescript-eslint/explicit-function-return-type&quot;: &quot;off&quot;,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  settings<span class="token operator">:</span>  <span class="token punctuation">{</span>
    react<span class="token operator">:</span>  <span class="token punctuation">{</span>
      version<span class="token operator">:</span>  <span class="token string">'detect'</span><span class="token punctuation">,</span>  <span class="token comment">// 告诉 eslint-plugin-react 自动检测 React 的版本</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="vscode-扩展和设置"><a href="#vscode-扩展和设置" class="header-anchor">#</a> VSCode 扩展和设置</h2> <p>我们添加了 <code>ESLint</code> 和 <code>Prettier</code> ，下一步就是在保存时自动修复/美化我们的代码。</p> <p>首先，安装 VSCode 的 <code>ESLint extension</code> 和 <code>Prettier extension</code> 。这将使 <code>ESLint</code> 与您的编辑器无缝集成。</p> <p>接下来，通过将以下内容添加到您的中来更新工作区设置 <code>.vscode/settings.json</code> ：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>保存时， <code>VS Code</code> 会发挥它的魔力并修复您的代码。很棒！</p> <h2 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h2> <p><code>React</code> 的核心概念之一是组件。在这里，我们将引用 <code>React v16.8</code> 以后的标准组件，这意味着使用 <code>Hook</code> 而不是类的组件。</p> <p>通常，一个基本的组件有很多需要关注的地方。让我们看一个例子：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
 
<span class="token comment">// 函数声明式写法</span>
<span class="token keyword">function</span> <span class="token function">Heading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>My Website Heading<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// 函数扩展式写法</span>
<span class="token keyword">const</span> OtherHeading<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>My Website Heading<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>注意这里的关键区别。在第一个例子中，我们使用函数声明式写法，我们注明了这个函数返回值是 <code>React.ReactNode</code> 类型。相反，第二个例子使用了一个函数表达式。因为第二个实例返回一个函数，而不是一个值或表达式，所以我们我们注明了这个函数返回值是 <code>React.FC</code> 类型。</p> <p>记住这两种方式可能会让人混淆。这主要取决于设计选择。无论您选择在项目中使用哪个，都要始终如一地使用它。</p> <h2 id="props"><a href="#props" class="header-anchor">#</a> Props</h2> <p>我们将介绍的下一个核心概念是 <code>Props</code>。你可以使用 <code>interface</code> 或 <code>type</code> 来定义 <code>Props</code> 。让我们看另一个例子：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
 
<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> string<span class="token punctuation">;</span>
  color<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
type OtherProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> string<span class="token punctuation">;</span>
  color<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// Notice here we're using the function declaration with the interface Props</span>
<span class="token keyword">function</span> <span class="token function">Heading</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> color <span class="token punctuation">}</span><span class="token operator">:</span> Props</span><span class="token punctuation">)</span><span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>My Website Heading<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// Notice here we're using the function expression with the type OtherProps</span>
<span class="token keyword">const</span> OtherHeading<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>OtherProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> color <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>My Website Heading<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>关于 <code>interface</code> 或 <code>type</code> ，我们建议遵循 <code>react-typescript-cheatsheet</code> 社区提出的准则：</p> <ul><li>在编写库或第三方环境类型定义时，始终将 <code>interface</code> 用于公共 <code>API</code> 的定义。</li> <li>考虑为你的 React 组件的 <code>State</code> 和 <code>Props</code> 使用 <code>type</code> ，因为它更受约束。”</li></ul> <p>让我们再看一个示例：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
 
type Props <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token comment">/** color to use for the background */</span>
  color<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
   <span class="token comment">/** standard children prop: accepts any valid React Node */</span>
  children<span class="token operator">:</span> React<span class="token punctuation">.</span>ReactNode<span class="token punctuation">;</span>
   <span class="token comment">/** callback function passed to the onClick handler*/</span>
  <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">const</span> Button<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> children<span class="token punctuation">,</span> color <span class="token operator">=</span> <span class="token string">'tomato'</span><span class="token punctuation">,</span> onClick <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token operator">&lt;</span>button style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> backgroundColor<span class="token operator">:</span> color <span class="token punctuation">}</span><span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>onClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在此 <code>&lt;Button /&gt;</code> 组件中，我们为 <code>Props</code> 使用 <code>type</code>。每个 <code>Props</code> 上方都有简短的说明，以为其他开发人员提供更多背景信息。<code>?</code> 表示 <code>Props</code> 是可选的。<code>children props</code> 是一个 <code>React.ReactNode</code> 表示它还是一个 <code>React</code> 组件。</p> <p>通常，在 <code>React</code> 和 <code>TypeScript</code> 项目中编写 <code>Props</code> 时，请记住以下几点：</p> <ul><li>始终使用 <code>TSDoc</code> 标记为你的 <code>Props</code> 添加描述性注释 <code>/** comment */</code>。</li> <li>无论你为组件 <code>Props</code> 使用 <code>type</code> 还是 <code>interfaces</code> ，都应始终使用它们。</li> <li>如果 <code>props</code> 是可选的，请适当处理或使用默认值。</li></ul> <h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <p>幸运的是，当使用 <code>Hook</code> 时， <code>TypeScript</code> 类型推断工作得很好。这意味着你没有什么好担心的。举个例子:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// `value` is inferred as a string</span>
<span class="token comment">// `setValue` is inferred as (newValue: string) =&gt; void</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>TypeScript</code> 推断出 <code>useState</code> 钩子给出的值。这是一个 <code>React</code> 和 <code>TypeScript</code> 协同工作的成果。</p> <p>在极少数情况下，你需要使用一个空值初始化 <code>Hook</code> ，可以使用泛型并传递联合以正确键入 <code>Hook</code> 。查看此实例：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>type User <span class="token operator">=</span> <span class="token punctuation">{</span>
  email<span class="token operator">:</span> string<span class="token punctuation">;</span>
  id<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// the generic is the &lt; &gt;</span>
<span class="token comment">// the union is the User | null</span>
<span class="token comment">// together, TypeScript knows, &quot;Ah, user can be User or null&quot;.</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> useState<span class="token operator">&lt;</span>User <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>下面是一个使用 <code>userReducer</code> 的例子：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>type AppState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
type Action <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;SET_ONE&quot;</span><span class="token punctuation">;</span> payload<span class="token operator">:</span> string <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;SET_TWO&quot;</span><span class="token punctuation">;</span> payload<span class="token operator">:</span> number <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token operator">:</span> AppState<span class="token punctuation">,</span> action<span class="token operator">:</span> Action</span><span class="token punctuation">)</span><span class="token operator">:</span> AppState <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;SET_ONE&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        one<span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token comment">// `payload` is string</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;SET_TWO&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        two<span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token comment">// `payload` is number</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>可见，Hooks 并没有为 <code>React</code> 和 <code>TypeScript</code> 项目增加太多复杂性。</p> <h2 id="常见用例"><a href="#常见用例" class="header-anchor">#</a> 常见用例</h2> <p>本节将介绍人们在将 <code>TypeScript</code> 与 <code>React</code> 结合使用时一些常见的坑。我们希望通过分享这些知识，您可以避免踩坑，甚至可以与他人分享这些知识。</p> <h2 id="处理表单事件"><a href="#处理表单事件" class="header-anchor">#</a> 处理表单事件</h2> <p>最常见的情况之一是 <code>onChange</code> 在表单的输入字段上正确键入使用的。这是一个例子：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">MyInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> setValue<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
 
  <span class="token comment">// 事件类型是“ChangeEvent”</span>
  <span class="token comment">// 我们将 “HTMLInputElement” 传递给 input</span>
  <span class="token keyword">function</span> <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token operator">:</span> React<span class="token punctuation">.</span>ChangeEvent<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
 
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span> id<span class="token operator">=</span><span class="token string">&quot;input-example&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="扩展组件的-props"><a href="#扩展组件的-props" class="header-anchor">#</a> 扩展组件的 Props</h2> <p>有时，您希望获取为一个组件声明的 <code>Props</code>，并对它们进行扩展，以便在另一个组件上使用它们。但是你可能想要修改一两个属性。还记得我们如何看待两种类型组件 <code>Props</code>、<code>type</code> 或 <code>interfaces</code> 的方法吗?取决于你使用的组件决定了你如何扩展组件 <code>Props</code> 。让我们先看看如何使用 <code>type</code>:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
 
type ButtonProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/** the background color of the button */</span>
    color<span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token comment">/** the text to show inside the button */</span>
    text<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
type ContainerProps <span class="token operator">=</span> ButtonProps <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
    <span class="token comment">/** the height of the container (value used with 'px') */</span>
    height<span class="token operator">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">const</span> Container<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>ContainerProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> color<span class="token punctuation">,</span> height<span class="token punctuation">,</span> width<span class="token punctuation">,</span> text <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> backgroundColor<span class="token operator">:</span> color<span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>如果你使用 <code>interface</code> 来声明 <code>props</code>，那么我们可以使用关键字 <code>extends</code> 从本质上“扩展”该接口，但要进行一些修改：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
 
<span class="token keyword">interface</span> <span class="token class-name">ButtonProps</span> <span class="token punctuation">{</span>
    <span class="token comment">/** the background color of the button */</span>
    color<span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token comment">/** the text to show inside the button */</span>
    text<span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">interface</span> <span class="token class-name">ContainerProps</span> <span class="token keyword">extends</span> <span class="token class-name">ButtonProps</span> <span class="token punctuation">{</span>
    <span class="token comment">/** the height of the container (value used with 'px') */</span>
    height<span class="token operator">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">const</span> Container<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span><span class="token operator">&lt;</span>ContainerProps<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> color<span class="token punctuation">,</span> height<span class="token punctuation">,</span> width<span class="token punctuation">,</span> text <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> backgroundColor<span class="token operator">:</span> color<span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>两种方法都可以解决问题。由您决定使用哪个。就个人而言，扩展 <code>interface</code> 更具可读性，但最终取决于你和你的团队。</p> <h2 id="第三方库"><a href="#第三方库" class="header-anchor">#</a> 第三方库</h2> <p>无论是用于诸如 <code>Apollo</code> 之类的 <code>GraphQL</code> 客户端还是用于诸如 <code>React Testing Library</code> 之类的测试，我们经常会在 <code>React</code> 和 <code>TypeScript</code> 项目中使用第三方库。发生这种情况时，你要做的第一件事就是查看这个库是否有一个带有 <code>TypeScript</code> 类型定义 <code>@types</code> 包。你可以通过运行：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
#yarn
yarn add @types/&lt;package-name&gt;
 
#npm
npm install @types/&lt;package-name&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>例如，如果您使用的是 <code>Jest</code> ，则可以通过运行以下命令来实现：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#yarn
yarn add @types/jest
 
#npm
npm install @types/jest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这样，每当在项目中使用 <code>Jest</code> 时，就可以增加类型安全性。</p> <p>该 <code>@types</code> 命名空间被保留用于包类型定义。它们位于一个名为 <code>DefinitelyTyped</code> 的存储库中，该存储库由 <code>TypeScript</code> 团队和社区共同维护。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>由于信息量大，以最佳方式一起使用 <code>React</code> 和 <code>TypeScript</code> 需要一些学习时间，但是从长远来看，其收益是巨大的。在本文中，我们介绍了配置，组件，Props，Hook，常见用例和第三方库。尽管我们可以更深入地研究各个领域，但这应涵盖帮助您遵循最佳实践所需的 <code>80％</code> 。</p> <p>如果您希望看到它的实际效果，可以在GitHub上看到这个示例。</p> <blockquote><p>https://github.com/jsjoeio/react-ts-example</p></blockquote> <blockquote><p>本文译自： https://www.sitepoint.com/react-with-typescript-best-practices/</p> <p>本文转载自：https://blog.csdn.net/azl397985856/article/details/106513095/</p></blockquote></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=react" title="标签">#react</a><a href="/tags/?tag=typescript" title="标签">#typescript</a><a href="/tags/?tag=%E7%BF%BB%E8%AF%91" title="标签">#翻译</a><a href="/tags/?tag=%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="标签">#最佳实践</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/21/2021, 1:52:09 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><!----> <a href="/pages/d68f8d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">项目结构搭建-慕课笔记</div></a></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/pages/d68f8d/">项目结构搭建-慕课笔记</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/c0343e/"><div>card-swiper的使用及自定义渐变导航栏</div></a> <span>10-29</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/6df927/"><div>自定义TabBar</div></a> <span>10-29</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/f2caaf/"><div>JavaScript是面向对象还是基于对象</div></a> <span>10-22</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2021
    <span></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2fbddcf7.js" defer></script><script src="/assets/js/2.f619f824.js" defer></script><script src="/assets/js/35.5821b7ac.js" defer></script>
  </body>
</html>
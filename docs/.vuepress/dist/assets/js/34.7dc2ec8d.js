(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{461:function(s,n,a){"use strict";a.r(n);var e=a(21),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"一、安装node、npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、安装node、npm"}},[s._v("#")]),s._v(" 一、安装node、npm")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# Ubuntu 16.04 TLS，执行以下命令：\nsudo apt-get install nodejs\nsudo apt install nodejs-legacy\nsudo apt install npm\n# Ubuntu 18.04 TLS，执行以下命令：\nsudo apt-get install nodejs\nsudo apt install libssl1.0-dev nodejs-dev node-gyp npm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("##二、更新npm的包镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo npm config set registry https://registry.npm.taobao.org\nsudo npm config list\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("##三、安装n管理器(用于管理nodejs版本)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 安装n模块\nsudo npm install -g n\n# 升级node.js到最新的稳定版本 \nsudo n stable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("重启一下终端，node -v看一下版本，就可以发现我们已经升级到最新版本了")]),s._v("\n##四、更新npm\nnpm包的更新其实就是自己更新自己")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo npm install -g npm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("##三、安装pm2")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install -g pm2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"四、上传项目到服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、上传项目到服务器"}},[s._v("#")]),s._v(" 四、上传项目到服务器")]),s._v(" "),a("p",[s._v("本地运行npm run build打包，然后把.nuxt、static、nuxt.config.js、package.json、package-lock.json上传到服务器")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//  .nuxt\n//  static\n//  nuxt.config.js\n//  package.json\n//  package-lock.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h1",{attrs:{id:"五、运行项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、运行项目"}},[s._v("#")]),s._v(" 五、运行项目")]),s._v(" "),a("p",[s._v("方式一：上传好后，运行npm install安装依赖\n最后运行npm run start启动项目")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install\nnpm run start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("方式二：使用git拷贝整个项目到项目目录\n然后依次执行")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm install\nnpm run build\nnpm run start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h1",{attrs:{id:"六、pm2-守护开启进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、pm2-守护开启进程"}},[s._v("#")]),s._v(" 六、pm2 守护开启进程")]),s._v(" "),a("p",[s._v("在项目的根目录下，执行一下命令。启动nuxt项目")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('pm2 start npm --name "product_name" -- run start\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("可以用 pm2 list 看到当前所有node进程列表。")]),s._v("\n关于pm2的使用，请访问："),a("a",{attrs:{href:"https://juejin.im/post/5be406705188256dbb5176f9",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://juejin.im/post/5be406705188256dbb5176f9"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("顺利的话，nuxt项目已经启动起来了，但是只能内网IP进行访问。")]),s._v(" "),a("p",[s._v("此时，可以使用nginx做反向代理 通过外网来访问nuxt项目")]),s._v(" "),a("h1",{attrs:{id:"七、nginx配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、nginx配置"}},[s._v("#")]),s._v(" 七、nginx配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("server{\n         listen 80;\n         server_name xxx.xxxx.com;公网地址\n\n         gzip on;\n         gzip_types      text/plain application/xml text/css application/javascript;\n         gzip_min_length 1000;\n\n         location / {\n             proxy_redirect                      off;\n             proxy_set_header Host               $host;\n             proxy_set_header X-Real-IP          $remote_addr;\n             proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n             proxy_set_header X-Forwarded-Proto  $scheme;\n             proxy_read_timeout          1m;\n             proxy_connect_timeout       1m;\n             # http://127.0.0.1 + nuxt启动端口\n             proxy_pass  http://127.0.0.1:8004\n          }\n      }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h1",{attrs:{id:"八、重启nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#八、重启nginx"}},[s._v("#")]),s._v(" 八、重启nginx")]),s._v(" "),a("p",[s._v("进入nginx的sbin目录下（/user/local/nginx/sbin）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("./nginx -s reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);
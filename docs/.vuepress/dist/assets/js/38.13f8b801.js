(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{464:function(t,s,a){"use strict";a.r(s);var r=a(21),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"一、为什么会出现跨域问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、为什么会出现跨域问题"}},[t._v("#")]),t._v(" 一、为什么会出现跨域问题")]),t._v(" "),a("p",[t._v("出于浏览器的同源策略限制。同源策略（Sameoriginpolicy）是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能都会受到影响。可以说Web是构建在同源策略基础之上的，浏览器只是针对同源策略的一种实现。同源策略会阻止一个域的javascript脚本和另外一个域的内容进行交互。所谓同源（即指在同一个域）就是两个页面具有相同的协议（protocol），主机（host）和端口号（port）")]),t._v(" "),a("h1",{attrs:{id:"二、什么是跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、什么是跨域"}},[t._v("#")]),t._v(" 二、什么是跨域")]),t._v(" "),a("p",[t._v("当一个请求url的协议、域名、端口三者之间任意一个与当前页面url不同即为跨域")]),t._v(" "),a("h1",{attrs:{id:"三、flask中如何解决跨域问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、flask中如何解决跨域问题"}},[t._v("#")]),t._v(" 三、flask中如何解决跨域问题")]),t._v(" "),a("h2",{attrs:{id:"_1-安装flask-cors模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装flask-cors模块"}},[t._v("#")]),t._v(" 1.安装flask-cors模块")]),t._v(" "),a("p",[a("code",[t._v("pip install flask-cors")])]),t._v(" "),a("h2",{attrs:{id:"_2-主路由部分增加设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-主路由部分增加设置"}},[t._v("#")]),t._v(" 2.主路由部分增加设置")]),t._v(" "),a("p",[a("strong",[t._v("如有蓝图一般在app的__init__中")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# -*- coding=utf-8 -*-\nfrom flask import Flask\nfrom datetime import timedelta\nimport datetime\nfrom flask_cors import *  # 导入模块\n\n\ndef create_app():\n    app = Flask(__name__)\n    CORS(app, supports_credentials=True)  # 设置跨域\n    from .reduce import reduce\n    app.register_blueprint(reduce)\n    return app\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("h2",{attrs:{id:"_3-cors参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-cors参数说明"}},[t._v("#")]),t._v(" 3. CORS参数说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("Head字段")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("resources")]),t._v(" "),a("td",[t._v("字典、迭代器或字符串")]),t._v(" "),a("td",[t._v("无")]),t._v(" "),a("td",[t._v("全局配置允许跨域的API接口")])]),t._v(" "),a("tr",[a("td",[t._v("origins")]),t._v(" "),a("td",[t._v("列表、字符串或正则表达式")]),t._v(" "),a("td",[t._v("Access-Control-Allow-Origin")]),t._v(" "),a("td",[t._v("配置允许跨域访问的源，"),a("code",[t._v("*")]),t._v("表示全部允许")])]),t._v(" "),a("tr",[a("td",[t._v("methods")]),t._v(" "),a("td",[t._v("列表、字符串")]),t._v(" "),a("td",[t._v("Access-Control-Allow-Methods")]),t._v(" "),a("td",[t._v("配置跨域支持的请求方式，如：GET、POST")])]),t._v(" "),a("tr",[a("td",[t._v("expose_headers")]),t._v(" "),a("td",[t._v("列表、字符串")]),t._v(" "),a("td",[t._v("Access-Control-Expose-Headers")]),t._v(" "),a("td",[t._v("自定义请求响应的Head信息")])]),t._v(" "),a("tr",[a("td",[t._v("allow_headers")]),t._v(" "),a("td",[t._v("列表、字符串或正则表达式")]),t._v(" "),a("td",[t._v("Access-Control-Request-Headers")]),t._v(" "),a("td",[t._v("配置允许跨域的请求头")])]),t._v(" "),a("tr",[a("td",[t._v("supports_credentials")]),t._v(" "),a("td",[t._v("布尔值")]),t._v(" "),a("td",[t._v("Access-Control-Allow-Credentials")]),t._v(" "),a("td",[t._v("是否允许请求发送cookie，false是不允许")])]),t._v(" "),a("tr",[a("td",[t._v("max_age")]),t._v(" "),a("td",[t._v("整数、字符串")]),t._v(" "),a("td",[t._v("Access-Control-Max-Age")]),t._v(" "),a("td",[t._v("预检请求的有效时长")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);